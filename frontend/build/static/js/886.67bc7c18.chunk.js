"use strict";(self.webpackChunkmama_miracle_boutique_frontend=self.webpackChunkmama_miracle_boutique_frontend||[]).push([[886],{1886:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var s=a(5043),n=a(3003),l=a(3216),i=a(579);const r=()=>{const[e,t]=(0,s.useState)([]),[a,r]=(0,s.useState)(!0),[c,d]=(0,s.useState)(null),[o,m]=(0,s.useState)(""),[x,p]=(0,s.useState)(!1),[h,u]=(0,s.useState)(""),{user:f}=(0,n.d4)((e=>e.auth)),b=(0,l.Zp)();(0,s.useEffect)((()=>{if(!f||!f.isAdmin)return void b("/login");(async()=>{try{const e=await fetch("/api/contact",{headers:{Authorization:"Bearer ".concat(f.token)}}),a=await e.json();t(Array.isArray(a)?a:[])}catch(e){t([])}finally{r(!1)}})()}),[f,b]);return a?(0,i.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gradient-to-br from-pink-50 via-blue-50 to-green-50",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,i.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-pink-50 via-blue-50 to-green-50 py-12 px-4",children:(0,i.jsxs)("div",{className:"w-full max-w-4xl bg-white rounded-3xl shadow-xl p-8 border border-pink-100",children:[(0,i.jsx)("h1",{className:"text-3xl font-extrabold text-pink-600 tracking-tight drop-shadow-lg text-center mb-8",children:"Contact Messages"}),0===e.length?(0,i.jsx)("div",{className:"text-center py-8",children:(0,i.jsx)("p",{className:"text-gray-500",children:"No messages found."})}):(0,i.jsx)("div",{className:"space-y-6",children:e.map((e=>(0,i.jsxs)("div",{className:"bg-blue-50 rounded-xl p-6 shadow flex flex-col gap-2",children:[(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-semibold text-primary-700",children:e.name})," ",(0,i.jsxs)("span",{className:"text-gray-500",children:["(",e.email,")"]})]}),(0,i.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleString()})]}),(0,i.jsx)("div",{className:"text-gray-700 mt-2",children:e.message}),(0,i.jsxs)("div",{className:"mt-2 flex flex-col sm:flex-row gap-2 items-center",children:[(0,i.jsx)("input",{type:"text",placeholder:"Type a reply...",value:c===e._id?o:"",onChange:e=>m(e.target.value),className:"input-premium flex-1",disabled:c!==e._id}),c===e._id?(0,i.jsx)("button",{onClick:()=>(async e=>{if(o.trim()){p(!0),u("");try{(await fetch("/api/contact/".concat(e,"/reply"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)},body:JSON.stringify({reply:o})})).ok?(u("Reply sent!"),d(null),m("")):u("Failed to send reply.")}catch(t){u("Failed to send reply.")}finally{p(!1)}}})(e._id,e.email,e.name),className:"btn-gradient px-4 py-2 rounded-xl font-semibold text-sm shadow hover:scale-105 transition-all",disabled:x,children:x?"Sending...":"Send"}):(0,i.jsx)("button",{onClick:()=>d(e._id),className:"btn-gradient px-4 py-2 rounded-xl font-semibold text-sm shadow hover:scale-105 transition-all",children:"Reply"}),h&&c===e._id&&(0,i.jsx)("span",{className:"text-green-600 text-xs ml-2",children:h})]})]},e._id)))})]})})}}}]);
//# sourceMappingURL=886.67bc7c18.chunk.js.map