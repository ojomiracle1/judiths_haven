"use strict";(self.webpackChunkmama_miracle_boutique_frontend=self.webpackChunkmama_miracle_boutique_frontend||[]).push([[218],{588:(e,s,t)=>{t.d(s,{A:()=>i});t(5043);var r=t(579);const i=()=>(0,r.jsx)("div",{className:"flex justify-center items-center min-h-[40vh] sm:min-h-screen w-full",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 sm:h-12 sm:w-12 border-t-2 border-b-2 border-blue-500"})})},6218:(e,s,t)=>{t.r(s),t.d(s,{default:()=>h});var r=t(9379),i=t(5043),a=t(3003),n=t(3216),c=t(7227),l=t(3401),d=t(9661),o=t(588),m=t(3204),u=t(899),x=t(579);const p=u.Ik().shape({name:u.Yj().required("Name is required"),price:u.ai().min(0,"Price must be a positive number").required("Price is required"),brand:u.Yj().required("Brand is required"),category:u.Yj().required("Category is required"),countInStock:u.ai().min(0,"Stock must be a non-negative integer").required("Stock is required"),description:u.Yj().required("Description is required")}),h=()=>{const[e,s]=(0,i.useState)({name:"",description:"",price:"",images:[],brand:"",category:"",countInStock:"",sizes:[],colors:[],features:[],gender:"unisex",featured:!1,discount:0,discountPrice:""}),[t,u]=(0,i.useState)(!1),[h,b]=(0,i.useState)(""),[g,f]=(0,i.useState)(""),[j,v]=(0,i.useState)(""),[N,y]=(0,i.useState)({}),{id:k}=(0,n.g)(),w=(0,n.Zp)(),A=(0,a.wA)(),{isLoading:C,isError:S,message:P,isSuccess:q}=(0,a.d4)((e=>e.product)),{user:F}=(0,a.d4)((e=>e.auth)),{categories:I}=(0,a.d4)((e=>e.category));(0,i.useEffect)((()=>{F||w("/login"),S&&l.oR.error(P),q&&(A((0,c.cL)()),w("/admin/products")),A((0,d.bW)()),k&&A((0,c.y9)(k)).unwrap().then((e=>{s({name:e.name,description:e.description,price:e.price,images:e.images||[],brand:e.brand,category:e.category,countInStock:e.countInStock,sizes:e.sizes||[],colors:e.colors||[],features:e.features||[],gender:e.gender||"unisex",featured:e.featured||!1,discount:e.discount||0,discountPrice:e.discountPrice||""})})).catch((e=>{l.oR.error(e)}))}),[F,w,S,P,q,A,k]);const z=t=>{const{name:i,value:a,type:n,checked:c}=t.target;s("checkbox"===n?(0,r.A)((0,r.A)({},e),{},{[i]:c}):(0,r.A)((0,r.A)({},e),{},{[i]:a}))};return C?(0,x.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gradient-to-br from-pink-50 via-blue-50 to-green-50",children:(0,x.jsx)(o.A,{})}):(0,x.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-pink-50 via-blue-50 to-green-50 py-12 px-4",children:(0,x.jsxs)("div",{className:"w-full max-w-2xl bg-white rounded-3xl shadow-xl p-8 border border-pink-100",children:[(0,x.jsx)("h1",{className:"text-3xl font-extrabold mb-8 text-pink-600 tracking-tight drop-shadow-lg text-center",children:k?"Edit Product":"Create Product"}),(0,x.jsxs)("form",{onSubmit:async s=>{s.preventDefault();try{await p.validate(e,{abortEarly:!1}),y({})}catch(r){const e={};return r.inner.forEach((s=>{e[s.path]=s.message})),void y(e)}const t={name:e.name,description:e.description,price:Number(e.price),images:e.images,brand:e.brand,category:e.category,countInStock:Number(e.countInStock),sizes:e.sizes,colors:e.colors,features:e.features,gender:e.gender,featured:e.featured,discount:Number(e.discount),discountPrice:e.discountPrice?Number(e.discountPrice):null};k?A((0,c.vc)({id:k,productData:t})).unwrap().then((()=>{l.oR.success("Product updated successfully"),w("/admin/products")})).catch((e=>{l.oR.error(e)})):A((0,c.WY)(t)).unwrap().then((()=>{l.oR.success("Product created successfully"),w("/admin/products")})).catch((e=>{l.oR.error(e)}))},className:"space-y-10",children:[(0,x.jsxs)("div",{className:"haven-section",children:[(0,x.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"name",className:"block text-base font-semibold text-primary-700 mb-1",children:"Name"}),(0,x.jsx)("input",{id:"name",name:"name",type:"text",required:!0,className:"input-premium",value:e.name,onChange:z}),N.name&&(0,x.jsx)("div",{className:"text-red-500 text-sm mt-1",children:N.name})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"brand",className:"block text-base font-semibold text-primary-700 mb-1",children:"Brand"}),(0,x.jsx)("input",{id:"brand",name:"brand",type:"text",required:!0,className:"input-premium",value:e.brand,onChange:z}),N.brand&&(0,x.jsx)("div",{className:"text-red-500 text-sm mt-1",children:N.brand})]})]}),(0,x.jsxs)("div",{className:"mt-6",children:[(0,x.jsx)("label",{htmlFor:"description",className:"block text-base font-semibold text-primary-700 mb-1",children:"Description"}),(0,x.jsx)("textarea",{id:"description",name:"description",rows:"3",required:!0,className:"input-premium min-h-[90px]",value:e.description,onChange:z}),N.description&&(0,x.jsx)("div",{className:"text-red-500 text-sm mt-1",children:N.description})]})]}),(0,x.jsxs)("div",{className:"haven-section",children:[(0,x.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"price",className:"block text-base font-semibold text-primary-700 mb-1",children:"Price"}),(0,x.jsx)("input",{id:"price",name:"price",type:"number",required:!0,className:"input-premium",value:e.price,onChange:z}),N.price&&(0,x.jsx)("div",{className:"text-red-500 text-sm mt-1",children:N.price})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"countInStock",className:"block text-base font-semibold text-primary-700 mb-1",children:"Stock"}),(0,x.jsx)("input",{id:"countInStock",name:"countInStock",type:"number",required:!0,className:"input-premium",value:e.countInStock,onChange:z}),N.countInStock&&(0,x.jsx)("div",{className:"text-red-500 text-sm mt-1",children:N.countInStock})]})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8 mt-6",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"discount",className:"block text-base font-semibold text-primary-700 mb-1",children:"Discount (%)"}),(0,x.jsx)("input",{id:"discount",name:"discount",type:"number",min:"0",max:"100",className:"input-premium",value:e.discount,onChange:z})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"discountPrice",className:"block text-base font-semibold text-primary-700 mb-1",children:"Discount Price"}),(0,x.jsx)("input",{id:"discountPrice",name:"discountPrice",type:"number",className:"input-premium",value:e.discountPrice,onChange:z})]})]})]}),(0,x.jsxs)("div",{className:"haven-section",children:[(0,x.jsxs)("div",{className:"mb-6",children:[(0,x.jsx)("label",{htmlFor:"category",className:"block text-base font-semibold text-primary-700 mb-1",children:"Category"}),(0,x.jsxs)("select",{id:"category",name:"category",required:!0,className:"input-premium",value:e.category,onChange:z,children:[(0,x.jsx)("option",{value:"",children:"Select Category"}),I.map((e=>(0,x.jsx)("option",{value:e._id,children:e.name},e._id)))]}),N.category&&(0,x.jsx)("div",{className:"text-red-500 text-sm mt-1",children:N.category})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-base font-semibold text-primary-700 mb-1",children:"Images"}),(0,x.jsxs)("div",{className:"mt-1",children:[(0,x.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:async e=>{const t=Array.from(e.target.files);u(!0);try{const e=t.map((async e=>{const s=new FormData;s.append("image",e);const{data:t}=await m.A.post("/api/upload",s,{headers:{"Content-Type":"multipart/form-data"}});return t.path})),i=await Promise.all(e);s((e=>(0,r.A)((0,r.A)({},e),{},{images:[...e.images,...i]}))),u(!1)}catch(i){console.error(i),u(!1),l.oR.error("Upload failed")}},className:"input-premium file:bg-gradient-to-r file:from-pink-200 file:to-blue-200 file:text-primary-700 file:rounded-lg file:shadow file:font-semibold file:px-4 file:py-2 hover:file:from-pink-300 hover:file:to-blue-300"}),t&&(0,x.jsx)(o.A,{})]}),(0,x.jsx)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:e.images.map(((e,t)=>(0,x.jsxs)("div",{className:"relative rounded-xl overflow-hidden shadow-lg",children:[(0,x.jsx)("img",{src:e,alt:"Product ".concat(t+1),className:"w-full h-32 object-cover rounded-xl border border-pink-100"}),(0,x.jsx)("button",{type:"button",onClick:()=>(e=>{s((s=>(0,r.A)((0,r.A)({},s),{},{images:s.images.filter(((s,t)=>t!==e))})))})(t),className:"absolute top-2 right-2 btn-gradient p-1 rounded-full shadow",children:"\xd7"})]},t)))})]})]}),(0,x.jsxs)("div",{className:"haven-section",children:[(0,x.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-base font-semibold text-primary-700 mb-1",children:"Sizes"}),(0,x.jsxs)("div",{className:"mt-1 flex space-x-2",children:[(0,x.jsx)("input",{type:"text",value:h,onChange:e=>b(e.target.value),placeholder:"Add a size (e.g., 10, 11, 12)",className:"input-premium"}),(0,x.jsx)("button",{type:"button",onClick:()=>{h.trim()&&(s((e=>(0,r.A)((0,r.A)({},e),{},{sizes:[...e.sizes,h.trim()]}))),b(""))},className:"btn-gradient",children:"Add"})]}),(0,x.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:e.sizes.map(((e,t)=>(0,x.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 shadow",children:[e,(0,x.jsx)("button",{type:"button",onClick:()=>(e=>{s((s=>(0,r.A)((0,r.A)({},s),{},{sizes:s.sizes.filter(((s,t)=>t!==e))})))})(t),className:"ml-2 text-blue-600 hover:text-blue-800",children:"\xd7"})]},t)))})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-base font-semibold text-primary-700 mb-1",children:"Colors"}),(0,x.jsxs)("div",{className:"mt-1 flex space-x-2",children:[(0,x.jsx)("input",{type:"text",value:g,onChange:e=>f(e.target.value),placeholder:"Add a color",className:"input-premium"}),(0,x.jsx)("button",{type:"button",onClick:()=>{g.trim()&&(s((e=>(0,r.A)((0,r.A)({},e),{},{colors:[...e.colors,g.trim()]}))),f(""))},className:"btn-gradient",children:"Add"})]}),(0,x.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:e.colors.map(((e,t)=>(0,x.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-pink-100 text-pink-800 shadow",children:[e,(0,x.jsx)("button",{type:"button",onClick:()=>(e=>{s((s=>(0,r.A)((0,r.A)({},s),{},{colors:s.colors.filter(((s,t)=>t!==e))})))})(t),className:"ml-2 text-pink-600 hover:text-pink-800",children:"\xd7"})]},t)))})]})]}),(0,x.jsxs)("div",{className:"mt-8",children:[(0,x.jsx)("label",{className:"block text-base font-semibold text-primary-700 mb-1",children:"Features"}),(0,x.jsxs)("div",{className:"mt-1 flex space-x-2",children:[(0,x.jsx)("input",{type:"text",value:j,onChange:e=>v(e.target.value),placeholder:"Add a feature",className:"input-premium"}),(0,x.jsx)("button",{type:"button",onClick:()=>{j.trim()&&(s((e=>(0,r.A)((0,r.A)({},e),{},{features:[...e.features,j.trim()]}))),v(""))},className:"btn-gradient",children:"Add"})]}),(0,x.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:e.features.map(((e,t)=>(0,x.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 shadow",children:[e,(0,x.jsx)("button",{type:"button",onClick:()=>(e=>{s((s=>(0,r.A)((0,r.A)({},s),{},{features:s.features.filter(((s,t)=>t!==e))})))})(t),className:"ml-2 text-green-600 hover:text-green-800",children:"\xd7"})]},t)))})]})]}),(0,x.jsx)("div",{className:"haven-section",children:(0,x.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8 items-center",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"gender",className:"block text-base font-semibold text-primary-700 mb-1",children:"Gender"}),(0,x.jsxs)("select",{id:"gender",name:"gender",className:"input-premium",value:e.gender,onChange:z,children:[(0,x.jsx)("option",{value:"unisex",children:"Unisex"}),(0,x.jsx)("option",{value:"male",children:"Male"}),(0,x.jsx)("option",{value:"female",children:"Female"})]})]}),(0,x.jsxs)("div",{className:"flex items-center mt-6 sm:mt-0",children:[(0,x.jsx)("input",{id:"featured",name:"featured",type:"checkbox",checked:e.featured,onChange:z,className:"mr-2"}),(0,x.jsx)("label",{htmlFor:"featured",className:"text-base font-semibold text-primary-700",children:"Featured Product"})]})]})}),(0,x.jsx)("div",{className:"pt-2",children:(0,x.jsx)("button",{type:"submit",className:"w-full py-3 px-4 btn-gradient font-semibold rounded-xl shadow-lg hover:scale-[1.03] transition-all duration-200",children:k?"Update Product":"Create Product"})})]})]})})}}}]);
//# sourceMappingURL=218.9d554c13.chunk.js.map