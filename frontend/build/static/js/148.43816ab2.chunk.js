(self.webpackChunkmama_miracle_boutique_frontend=self.webpackChunkmama_miracle_boutique_frontend||[]).push([[148],{588:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});s(5043);var n=s(579);const o=()=>(0,n.jsx)("div",{className:"flex justify-center items-center min-h-[40vh] sm:min-h-screen w-full",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 sm:h-12 sm:w-12 border-t-2 border-b-2 border-blue-500"})})},2450:function(e,t,s){var n,o,a;o=[],void 0===(a="function"===typeof(n=function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function n(e,t,s){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){i(n.response,t,s)},n.onerror=function(){console.error("could not download file")},n.send()}function o(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof s.g&&s.g.global===s.g?s.g:void 0,l=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),i=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(e,t,s){var l=r.URL||r.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener","string"==typeof e?(i.href=e,i.origin===location.origin?a(i):o(i.href)?n(e,t,s):a(i,i.target="_blank")):(i.href=l.createObjectURL(e),setTimeout((function(){l.revokeObjectURL(i.href)}),4e4),setTimeout((function(){a(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,s,r){if(s=s||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,r),s);else if(o(e))n(e,s,r);else{var l=document.createElement("a");l.href=e,l.target="_blank",setTimeout((function(){a(l)}))}}:function(e,t,s,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return n(e,t,s);var a="application/octet-stream"===e.type,i=/constructor/i.test(r.HTMLElement)||r.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||a&&i||l)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=d?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},c.readAsDataURL(e)}else{var u=r.URL||r.webkitURL,p=u.createObjectURL(e);o?o.location=p:location.href=p,o=null,setTimeout((function(){u.revokeObjectURL(p)}),4e4)}});r.saveAs=i.saveAs=i,e.exports=i})?n.apply(t,o):n)||(e.exports=a)},6148:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var n=s(9379),o=s(5043),a=s(5475),r=s(3003),l=s(9751),i=s(3401),d=s(588),c=s(9722),u=s(2450),p=s(3204),f=s(579);const x=()=>{const e=(0,r.wA)(),{users:t=[],isLoading:s,isError:x,message:m}=(0,r.d4)((e=>e.user)),[h,b]=(0,o.useState)([]),[g,v]=(0,o.useState)(!1),[w,y]=(0,o.useState)(!1),[j,N]=(0,o.useState)(!1),[k,A]=(0,o.useState)({role:"",status:""}),[E,R]=(0,o.useState)(!1);(0,o.useEffect)((()=>{x&&i.oR.error(m),e((0,l.lo)()),b([]),v(!1)}),[e,x,m]);const U=async e=>{R(!0);try{const t=await p.A.get("/api/users/export?format=".concat(e),{responseType:"blob"}),s="users.".concat("excel"===e?"xlsx":"csv");(0,u.saveAs)(t.data,s),i.oR.success("Exported as ".concat(e.toUpperCase()))}catch(t){i.oR.error("Export failed")}finally{R(!1)}};return s?(0,f.jsx)(d.A,{}):(0,f.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-10",children:[h.length>0&&(0,f.jsxs)("div",{className:"mb-4 flex flex-col sm:flex-row gap-2 items-center justify-between bg-blue-50 border border-blue-200 rounded-xl p-3 shadow",children:[(0,f.jsxs)("span",{className:"font-semibold text-blue-800",children:[h.length," selected"]}),(0,f.jsxs)("div",{className:"flex gap-2",children:[(0,f.jsx)("button",{onClick:async()=>{if(0!==h.length&&window.confirm("Delete ".concat(h.length," users? This cannot be undone!"))){y(!0);try{await c.A.post("/api/users/bulk-delete",{userIds:h}),i.oR.success("Users deleted"),e((0,l.lo)()),b([]),v(!1)}catch(n){var t,s;i.oR.error((null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Bulk delete failed")}finally{y(!1)}}},disabled:w,className:"bg-gradient-to-r from-red-200 to-pink-200 hover:from-red-300 hover:to-pink-300 text-red-900 font-semibold rounded-lg px-4 py-1 shadow focus:outline-none focus:ring-2 focus:ring-red-200 transition-all duration-150",children:w?"Deleting...":"Bulk Delete"}),(0,f.jsx)("button",{onClick:()=>N(!0),disabled:w,className:"bg-gradient-to-r from-green-200 to-blue-200 hover:from-green-300 hover:to-blue-300 text-blue-900 font-semibold rounded-lg px-4 py-1 shadow focus:outline-none focus:ring-2 focus:ring-blue-200 transition-all duration-150",children:"Bulk Update"})]})]}),j&&(0,f.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",children:(0,f.jsxs)("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md",children:[(0,f.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Bulk Update Users"}),(0,f.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),y(!0);try{await c.A.put("/api/users/bulk-update",{userIds:h,update:k}),i.oR.success("Users updated"),e((0,l.lo)()),b([]),v(!1),N(!1),A({role:"",status:""})}catch(o){var s,n;i.oR.error((null===(s=o.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||"Bulk update failed")}finally{y(!1)}},className:"space-y-4",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block font-semibold mb-1",children:"Role"}),(0,f.jsxs)("select",{value:k.role,onChange:e=>A((t=>(0,n.A)((0,n.A)({},t),{},{role:e.target.value}))),className:"w-full border rounded px-2 py-1",children:[(0,f.jsx)("option",{value:"",children:"-- No Change --"}),(0,f.jsx)("option",{value:"user",children:"User"}),(0,f.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block font-semibold mb-1",children:"Status"}),(0,f.jsxs)("select",{value:k.status,onChange:e=>A((t=>(0,n.A)((0,n.A)({},t),{},{status:e.target.value}))),className:"w-full border rounded px-2 py-1",children:[(0,f.jsx)("option",{value:"",children:"-- No Change --"}),(0,f.jsx)("option",{value:"active",children:"Active"}),(0,f.jsx)("option",{value:"suspended",children:"Suspended"})]})]}),(0,f.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,f.jsx)("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-1 rounded bg-gray-200",disabled:w,children:"Cancel"}),(0,f.jsx)("button",{type:"submit",className:"px-4 py-1 rounded bg-blue-500 text-white font-semibold",disabled:w,children:w?"Updating...":"Update"})]})]})]})}),(0,f.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 gap-4",children:[(0,f.jsx)("h1",{className:"text-4xl font-extrabold text-gray-800 tracking-tight drop-shadow-lg",children:"Users"}),(0,f.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,f.jsx)(a.N_,{to:"/admin/user/new",className:"bg-gradient-to-r from-pink-200 to-blue-200 hover:from-pink-300 hover:to-blue-300 text-blue-900 font-semibold rounded-xl px-6 py-2 shadow transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-pink-200 w-full sm:w-auto text-center",children:"Add New User"}),(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("button",{className:"bg-gradient-to-r from-green-200 to-blue-200 hover:from-green-300 hover:to-blue-300 text-blue-900 font-semibold rounded-xl px-4 py-2 shadow transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-200",disabled:E,onClick:()=>U("csv"),children:E?"Exporting...":"Export CSV"}),(0,f.jsx)("button",{className:"ml-2 bg-gradient-to-r from-blue-200 to-green-200 hover:from-blue-300 hover:to-green-300 text-green-900 font-semibold rounded-xl px-4 py-2 shadow transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-200",disabled:E,onClick:()=>U("excel"),children:E?"Exporting...":"Export Excel"})]})]})]}),t&&0!==t.length?(0,f.jsx)("div",{className:"overflow-x-auto",children:(0,f.jsx)("div",{className:"bg-white/80 shadow-2xl rounded-3xl p-4 sm:p-8 border border-blue-100",children:(0,f.jsxs)("table",{className:"min-w-full text-sm rounded-2xl overflow-hidden",children:[(0,f.jsx)("thead",{className:"bg-gradient-to-r from-pink-100/80 to-blue-100/80",children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{className:"px-2 py-3",children:(0,f.jsx)("input",{type:"checkbox",checked:g,onChange:()=>{g?(b([]),v(!1)):(b(t.map((e=>e._id))),v(!0))},"aria-label":"Select all users"})}),(0,f.jsx)("th",{className:"px-4 py-3 text-left font-bold text-gray-600 uppercase tracking-wider",children:"Name"}),(0,f.jsx)("th",{className:"px-4 py-3 text-left font-bold text-gray-600 uppercase tracking-wider",children:"Email"}),(0,f.jsx)("th",{className:"px-4 py-3 text-left font-bold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),(0,f.jsx)("tbody",{className:"divide-y divide-blue-50",children:t.map((t=>(0,f.jsxs)("tr",{className:"hover:bg-pink-50/60 transition-all duration-150",children:[(0,f.jsx)("td",{className:"px-2 py-4",children:(0,f.jsx)("input",{type:"checkbox",checked:h.includes(t._id),onChange:()=>{return e=t._id,void b((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]));var e},"aria-label":"Select user ".concat(t.name)})}),(0,f.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-gray-800 font-semibold",children:t.name}),(0,f.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-gray-700",children:t.email}),(0,f.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,f.jsx)("div",{className:"flex flex-col sm:flex-row gap-2",children:(0,f.jsx)("button",{onClick:()=>{return s=t._id,void(window.confirm("Are you sure you want to delete this user?")&&e((0,l.hG)(s)).unwrap().then((()=>{i.oR.success("User deleted successfully")})).catch((e=>{i.oR.error(e)})));var s},className:"bg-gradient-to-r from-red-200 to-pink-200 hover:from-red-300 hover:to-pink-300 text-red-900 font-semibold rounded-lg px-4 py-1 shadow focus:outline-none focus:ring-2 focus:ring-red-200 transition-all duration-150",children:"Delete"})})})]},t._id)))})]})})}):(0,f.jsx)("div",{className:"text-center py-16 bg-white/70 rounded-2xl shadow-inner",children:(0,f.jsx)("p",{className:"text-gray-500 text-lg",children:"No users found."})})]})}}}]);
//# sourceMappingURL=148.43816ab2.chunk.js.map